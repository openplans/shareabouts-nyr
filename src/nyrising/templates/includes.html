<!-- Analytics by GitHub Gauges -->
<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '{{ config.analytics_key }}');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>

<script type="text/javascript">

$(Shareabouts).on('panelshow', function(evt, app, path) {

  var $el = $('.place-detail'),
      $asset = $el.find('.asset-class'),
      asset = $asset.text(),
      assetMap = {
        'A': { 'name': 'Economic', 'cssclass': 'asset-economic'},
        'B': { 'name': 'Health and Social Services', 'cssclass': 'asset-health'},
        'C': { 'name': 'Housing', 'cssclass': 'asset-housing'},
        'D': { 'name': 'Infrastructure Systems', 'cssclass': 'asset-infrastructure'},
        'E': { 'name': 'Natural and Cultural', 'cssclass': 'asset-natural'},
        'other': { 'name': 'Missing asset identified by community member'}
      },
      // tab links
      $issuesLink = $el.find('.issues-link'),
      $ideasLink = $el.find('.ideas-link'),
      $correctionsLink = $el.find('.corrections-link'),
      $allLinks = $el.find('.comment-type-link'),
      // input
      $submitBtn = $el.find('[type="submit"]');

  // Set asset type
  if (assetMap[asset]) {
    $asset.text(assetMap[asset].name).addClass(assetMap[asset].cssclass);
  } else {
    $asset.text(assetMap.other.name).addClass(assetMap.other.cssclass);
  }

  // panel tabs
  $correctionsLink.click(function(e) {
    $allLinks.removeClass('current');
    $(this).addClass('current');

    $el.removeClass('show-ideas show-issues').addClass('show-corrections');

    $el.find('#survey-comment-type').val('comment-type-correction');
    $el.find('[type="submit"]').val('Suggest Correction');

    e.preventDefault();
  });

  $issuesLink.click(function(e) {
    $allLinks.removeClass('current');
    $(this).addClass('current');

    $el.removeClass('show-ideas show-corrections').addClass('show-issues');

    $el.find('#survey-comment-type').val('comment-type-issue');
    $el.find('[type="submit"]').val('Report Issue');

    e.preventDefault();
  });

  $ideasLink.click(function(e) {
    $allLinks.removeClass('current');
    $(this).addClass('current');

    $el.removeClass('show-issues show-corrections').addClass('show-ideas');

    $el.find('#survey-comment-type').val('comment-type-idea');
    $el.find('[type="submit"]').val('Share Idea');

    e.preventDefault();
  });

  // Init to corrections
  $correctionsLink.click();
});

</script>